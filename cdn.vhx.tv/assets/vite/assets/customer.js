import{g as rt,c as oe,j,a as ot,r as st}from"../styled-components.browser.esm.js";import{_ as D,f as it,k as R,e as at,B as ct,q as dt,g as ut,M as _t,F as Et,h as lt,j as mt,r as Tt,R as pt,t as ht}from"../preload-helper.a88d9a6c.js";import{b as ye,_ as wt,a as ee,i as ft}from"../_baseIteratee.07d193f7.js";import{P as Ie}from"../index.js";import{b as z,g as me,e as St}from"../intl.helpers.js";import{a as ce,d as gt,e as Nt,P as yt,f as It}from"../get.c5347d95.js";import{i as I,r as L,c as Pt}from"../fetch.4b32cb52.js";import{Y as vt,M as Ct,G as Ot,T as bt,P as At,L as Pe,a as Vt,C as Rt,S as kt,b as Dt,D as Ut,c as xt,d as Lt}from"../constants.8bb26a68.js";import{s as Te}from"../index.9b6e9674.js";import{e as Gt}from"../_baseGet.a129809a.js";import{a as Mt}from"../identity.27ffd062.js";import{h as ve}from"../moment.55cb88ed.js";import{W as pe,S as se,c as ie,R as Ht,s as Ft}from"../config.8925989d.js";import{R as he}from"../Redirect.78bae377.js";import{I as $t}from"../provider.js";import"../_getTag.b429d920.js";import"../constructFrom.js";import"../inheritsLoose.js";function jt(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const qt=(e,t)=>{window.Tracking.GOOGLE_ANALYTICS_4.HAS_OTT_GTAG&&Yt(e,t),window.Tracking.GOOGLE_ANALYTICS_4.HAS_SITE_GTAG&&Wt(e,t)},Yt=(e,t)=>{window.gtag("event",e,{...t,send_to:window.Tracking.GOOGLE_ANALYTICS_4.OTT_WEB_ID})},Wt=(e,t)=>{window.gtag("event",e,{...t,send_to:window.Tracking.GOOGLE_ANALYTICS_4.SITE_WEB_ID})},Ce="OTT Web";class Bt{constructor(){this.events={}}subscribe(t,n){!t||!n||(this.events[t]||(this.events[t]=[]),this.events[t].push(n))}publish(t,n){!this.events[t]||this.events[t].length<1||this.events[t].forEach(r=>{r(n||{})})}unsubscribeAll(){this.events={}}}const S=new Bt,Xt=e=>{const t=(i,d,_)=>{typeof window.fbq=="function"&&(i==null||i.forEach(m=>{(m.product_id&&m.product_id===d||!m.product_id)&&_(m)}))},n=i=>{const{currentSite:{facebook_pixel_codes:d},currentProductId:_}=i.siteContext;t(d,_,m=>{window.fbq("trackSingle",m.pixel_code,"CompleteRegistration")})},r=i=>{const{currentSite:{facebook_pixel_codes:d}}=i.siteContext,_=i.transaction;t(d,_.product_id,m=>{window.fbq("trackSingle",m.pixel_code,"Purchase",{currency:_.amount.currency,value:_.amount.cents/100,content_name:_.product_sku,num_items:1,content_type:"product",content_ids:_.product_id})})},o=i=>{const{currentSite:{facebook_pixel_codes:d},currentProductId:_}=i.siteContext;t(d,_,m=>{window.fbq("trackSingleCustom",m.pixel_code,"InitiateCheckout")})},s=i=>{const{currentSite:{facebook_pixel_codes:d}}=i.siteContext;!i.siteContext.isVideoView&&typeof window.fbq=="function"&&d&&Array.isArray(d)&&d.forEach(_=>{window.fbq("init",_.pixel_code),window.fbq("track","PageView")})};(()=>{S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_REGISTRATION,n),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_CONVERSION,r),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,r),S.subscribe("site_checkout_page_open",o),S.subscribe(e.EVENTS.EVENT_SITE_PAGE_VIEW,s)})()},zt=e=>{const t=o=>{const{currentSite:{adwords_pixel_codes:s}}=o.siteContext,u=o.transaction;s==null||s.forEach(i=>{(i.product_id===u.product_id||!i.product_id)&&(new Image().src="https://www.googleadservices.com/pagead/conversion/"+i.pixel_id+"/?value="+u.amount.cents/100+"&currency_code=USD&label="+i.pixel_label+"&amp;guid=ON&amp;script=0")})},n=o=>{t(o)};(()=>{window.gtag&&Object.entries(e.EVENTS).forEach(o=>{o[1]===e.EVENTS.EVENT_AUTHENTICATION_CONVERSION?S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_CONVERSION,n):o[1]===e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED&&S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,n)})})()},Kt=e=>{const t=({siteContext:r,trackingData:o})=>{qt(r.eventName,o)};(()=>{window.gtag&&Object.values(e.GOOGLE_ANALYTICS_4.EVENTS).forEach(r=>{S.subscribe(r,t)})})()},Jt="#watch-player .embed iframe",Qt=e=>{var o;const n=(((o=document.querySelector(Jt))==null?void 0:o.getAttribute("src"))||"").replace(/&amp;/g,"&");return new URLSearchParams(n).get(e)},Zt=e=>{const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n].getAttribute("content");return""},en=(e,t)=>{const n=t.EVENTS;switch(e){case n.EVENT_SALE_INITIATED:return n.EVENT_AUTHENTICATION_SIGNUP_VIEW;case n.EVENT_SALE_COMPLETE:return n.EVENT_AUTHENTICATION_CONVERSION;case n.EVENT_AUTHENTICATION_LOGIN:return n.EVENT_AUTHENTICATION_SIGNIN_VIEW;case n.EVENT_SITE_WATCHLIST_ADD:return n.EVENT_SITE_WATCHLIST_ADD.replace("site_","");case n.EVENT_SITE_WATCHLIST_REMOVE:return n.EVENT_SITE_WATCHLIST_REMOVE.replace("site_","");case n.EVENT_SITE_SEARCH:return"search";case n.EVENT_SITE_SEARCH_ITEM_SELECTION:return"searchitemselected";default:return e.indexOf("site_")>-1?"view":e}},te=({tracking:e,siteContext:t,additionalProps:n={},name:r})=>{var P;const o=e.PROPERTIES,{collectionID:s,currentSite:u,currentUser:i,page:d,productID:_,videoID:m}=t,w={[o.PROPERTY_COLLECTION_ID]:s,[o.PROPERTY_DEVICE]:"web",[o.PROPERTY_DEVICE_ID]:null,[o.PROPERTY_NAME]:r||((P=d==null?void 0:d.PROPERTIES)==null?void 0:P.NAME)||"view",[o.PROPERTY_PLATFORM]:"web",[o.PROPERTY_PLATFORM_ID]:null,[o.PROPERTY_PLATFORM_VERSION]:null,[o.PROPERTY_PRODUCT_ID]:_,[o.PROPERTY_REFERRER]:document.referrer,[o.PROPERTY_SITE_ID]:u.id,[o.PROPERTY_TIMESTAMP]:new Date().getTime(),[o.PROPERTY_TYPE]:"platform",[o.PROPERTY_URL]:window.location.href,[o.PROPERTY_USER_EMAIL]:i.email,[o.PROPERTY_USER_ID]:i.id,[o.PROPERTY_VIDEO_ID]:m,[o.PROPERTY_VIEW]:Oe(t),[o.PROPERTY_SESSION_ID]:e.SESSION};let p=n;return(n==null?void 0:n.type)==="video"&&(p={...n,collection_id:null,product_id:null}),["category","collection","movie","playlist","series"].includes(n==null?void 0:n.type)&&(p={...n,video_id:null,product_id:null}),(n==null?void 0:n.type)==="product"&&(p={...n,collection_id:null,video_id:null}),{...w,...p,[o.PROPERTY_TYPE]:"platform",[o.PROPERTY_URL]:n.url||window.location.href}},tn=(e,t={})=>{var n,r;return(n=t.DEPRECATED_EVENTS)!=null&&n.includes(e)?"":(r=t.UPDATED_EVENTS)!=null&&r[e]?t.UPDATED_EVENTS[e]:e},K={settings:{"/settings/billing":"settings_billing","/settings/emails":"settings_emails","/settings/info":"settings_info","/settings/purchases":"settings_purchases"},others:{tos:"terms_of_service",unavailable:"unavailable_geoblocked"}},Oe=e=>{const{activeView:t}=e,n=window.location.pathname;return n.substring(n.lastIndexOf("/")+1)==="send_login_email"?"login_email_sent":K.settings[n]?K.settings[n]:K.others[t]?K.others[t]:t.replace(/-/g,"_")},nn=(e,t,n)=>{const{collectionID:r,currentSite:o,video:s}=e.siteContext;return{...te({tracking:t,siteContext:e.siteContext,additionalProps:{current_src:s.current_src,current_type:s.current_type,duration:s.duration,is_chromecast:s.is_chromecast?1:0,is_drm:s.is_drm?1:0,is_fullscreen:s.is_fullscreen?1:0,is_live:Qt("live")!=="0"?1:0,is_trailer:s.is_trailer?1:0,platform_id:null,seconds:o.segment_heartbeat_frequency,timecode:s.current_time,type:"video"},name:n}),collection_id:r,type:"video",view:void 0}},W=e=>{const t=document.createElement("iframe");t.setAttribute("width","1"),t.setAttribute("height","1"),t.frameBorder=0,t.src=e,t.style.display="none",document.body.appendChild(t)},be=e=>{const t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,document.getElementsByTagName("head")[0].appendChild(t)},rn=e=>{const t=document.cookie.split(";");for(var n=0;n<t.length;n++){var r=t[n].trim();if(r.indexOf(e+"=")===0)return r.substring(e.length+1)}return null},on=e=>{const t=r=>{var m;const{siteContext:o,trackingData:s={}}=r,u=en(o.eventName,e),i={};for(const[w,p]of Object.entries(s))p!=null&&(i[w]=p);const d=te({tracking:e,siteContext:o,name:u,additionalProps:i}),_=Object.entries(d).map(([w,p])=>w+"="+encodeURIComponent(p)).join("&");((m=window._vhx)==null?void 0:m.environment)==="production"?new Image().src=e.PROPERTIES.PROPERTY_COLLECTOR_URL+"?"+_:console.log(e.PROPERTIES.PROPERTY_COLLECTOR_URL+"?"+_)};(()=>{const r={...e.EVENTS};delete r[e.EVENTS.EVENT_AUTHENTICATION_IDENTIFY_USER],Object.entries(r).forEach(o=>{S.subscribe(o[1],t)})})()},we="adclicked",sn=["ended","pause","play","seeked","seeking","timeupdate","resume","startbuffering","endbuffering","adstart","adfinish","adfail","adskip","fullscreenchange"],an=()=>{let e=null,t=null;const n=(d,_,m,w)=>{const p=_||t.currentTime()||0,P=m||t.duration()||0;S.publish(w,{event:d,currentTime:p,duration:P,playerEvent:w})},r=()=>{sn.forEach(d=>{t==null||t.on(d,(_,m,w)=>{n(_,m,w,d)})}),window.addEventListener("message",d=>{(d.data&&typeof d.data=="string"?JSON.parse(d.data):{}).method===we&&n({},void 0,void 0,we)},!1)},o=()=>{e=setInterval(()=>{s()},1e3)},s=()=>{window.VHX&&typeof window.VHX.Player=="function"&&(clearInterval(e),u())},u=()=>{t=window.VHX.Player("watch-embed"),r()};return(()=>{window.VHX.Player?u():o()})(),{getInstance:()=>t}},cn=e=>{let t=null,n;const r={ended:e.EVENTS.EVENT_SEGMENT_VIDEO_ENDED,pause:e.EVENTS.EVENT_SEGMENT_VIDEO_PAUSE,play:e.EVENTS.EVENT_SEGMENT_VIDEO_PLAY,seeked:e.EVENTS.EVENT_SEGMENT_VIDEO_SEEKED,seeking:e.EVENTS.EVENT_SEGMENT_VIDEO_SEEKING,timeupdate:e.EVENTS.EVENT_SEGMENT_VIDEO_TIMEUPDATE,resume:e.EVENTS.EVENT_SEGMENT_VIDEO_RESUME,startbuffering:e.EVENTS.EVENT_SEGMENT_VIDEO_START_BUFFER,endbuffering:e.EVENTS.EVENT_SEGMENT_VIDEO_END_BUFFER,adstart:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_START,adclicked:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_CLICKED,adfinish:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_FINISH,adfail:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_FAIL,adskip:e.EVENTS.EVENT_SEGMENT_VIDEO_AD_SKIP},o={[e.EVENTS.EVENT_AUTHENTICATION_LOGIN]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNIN_VIEW,[e.EVENTS.EVENT_AUTHENTICATION_SIGNIN_VIEW]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNIN_VIEW,[e.EVENTS.EVENT_AUTHENTICATION_SIGNUP_VIEW]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNUP_VIEW,[e.EVENTS.EVENT_AUTHENTICATION_SIGNUP_STARTED]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNUP_STARTED,[e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_STARTED]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_PURCHASE_STARTED,[e.EVENTS.EVENT_AUTHENTICATION_CONVERSION]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_CONVERSION,[e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_CONVERSION,[e.EVENTS.EVENT_AUTHENTICATION_REGISTRATION]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_REGISTRATION,[e.EVENTS.EVENT_AUTHENTICATION_SIGNIN_COMPLETE]:e.EVENTS.EVENT_SEGMENT_AUTHENTICATION_SIGNIN_COMPLETE,[e.EVENTS.EVENT_EXTRA_VIEWED]:e.EVENTS.EVENT_SEGMENT_EXTRA_VIEWED,[e.EVENTS.EVENT_SITE_WATCHLIST_ADD]:e.EVENTS.EVENT_SEGMENT_VIDEO_WATCHLIST_ADD,[e.EVENTS.EVENT_SITE_WATCHLIST_REMOVE]:e.EVENTS.EVENT_SEGMENT_VIDEO_WATCHLIST_REMOVE,[e.EVENTS.EVENT_VIDEO_COMMENT]:e.EVENTS.EVENT_SEGMENT_VIDEO_COMMENT_ADDED,[e.EVENTS.EVENT_SEARCH_ITEM_SELECTED]:e.EVENTS.EVENT_SEGMENT_SEARCH_ITEM_SELECTED,[e.EVENTS.EVENT_SEARCH]:e.EVENTS.EVENT_SEGMENT_SEARCH_EXECUTED},s=a=>{var l;return a?((l=a==null?void 0:a.parent)==null?void 0:l.type)==="series"?`${a.parent.name}: ${a.name}`:a.name:""},u=()=>{var Ee,le;const{eventName:a,collectionTitle:l,videoTitle:E,canonicalCollection:f}=t.siteContext,N=te({tracking:e,siteContext:t.siteContext,name:w(a),additionalProps:{type:(Ee=t.trackingData)==null?void 0:Ee.type,url:(le=t.trackingData)==null?void 0:le.url}}),{collection_id:A,video_id:ne}=N,re=s(f),nt=f?{collection_id:f.id,collection_title:re}:{collection_id:A,collection_title:l};return{...N,...nt,video_title:ne?E:null}},i=()=>({...u(),path:window.location.pathname}),d=()=>{const{currentUser:a,currentSite:l}=t.siteContext;return{name:a.name,email:a.email,vimeo_id:a.id?String(a.id):void 0,sso_id:l.sso_enabled&&a.external_user_id?String(a.external_user_id):void 0}},_=()=>{const{currentSite:a,currentUser:l}=t.siteContext,E=te({tracking:e,siteContext:t.siteContext}),f=[{collection:"users",encoding:"none",type:"vimeo_id",id:l.id?String(l.id):void 0}];return a.sso_enabled&&f.push({collection:"users",encoding:"none",type:"sso_id",id:l.external_user_id?String(l.external_user_id):void 0}),{context:{app:{name:a.title||E[e.PROPERTIES.PROPERTY_PLATFORM],version:E[e.PROPERTIES.PROPERTY_PLATFORM_VERSION]},externalIds:f,locale:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},traits:d()}},m=(a={})=>{const{product_id:l,product_name:E,product_sku:f,campaign:N}=a;return{revenue:a.amount.cents/100,context:{transaction:{product_id:l,product_name:E,product_sku:f,campaign:N}}}},w=a=>o[a],p=a=>{const{currentSite:l,setVideoProperty:E,video:f}=t.siteContext,N=l.segment_heartbeat_frequency;a%N===0&&N>0&&f.last_ten_seconds_tracked!==a&&(E("last_ten_seconds_tracked",a),y(e.EVENTS.EVENT_SEGMENT_VIDEO_TIMEUPDATE))},P=({currentTime:a})=>{const{setVideoProperty:l,video:E}=t.siteContext;l("current_time",a),E.has_firstplay||(y(e.EVENTS.EVENT_SEGMENT_VIDEO_PLAY),l("has_firstplay",!0))},O=(a,l)=>{const{setVideoProperty:E,video:f}=t.siteContext,N=Math.floor(l*.25),A=Math.floor(l*.5),ne=Math.floor(l*.75),re=Math.floor(l*.9);a>=N&&!f.has_watched_quartile_one&&(y(e.EVENTS.EVENT_SEGMENT_VIDEO_QUARTER_PROGRESS_PERCENTILE),E("has_watched_quartile_one",1)),a>=A&&!f.has_watched_quartile_two&&(y(e.EVENTS.EVENT_SEGMENT_VIDEO_HALF_PROGRESS_PERCENTILE),E("has_watched_quartile_two",1)),a>=ne&&!f.has_watched_quartile_three&&(y(e.EVENTS.EVENT_SEGMENT_VIDEO_THIRD_PROGRESS_PERCENTILE),E("has_watched_quartile_three",1)),a>=re&&!f.has_watched_quartile_complete&&(y(e.EVENTS.EVENT_SEGMENT_VIDEO_COMPLETE_PROGRESS_PERCENTILE),E("has_watched_quartile_complete",1))},v=({currentTime:a,duration:l})=>{const E=Math.floor(a),f=Math.ceil(l),{setVideoProperty:N,video:A}=t.siteContext;A.duration!==!1&&A.segment_has_initialized===!1?(O(E,f),N("segment_has_initialized",1)):N("duration",f),p(E),A.last_duration_change!==E&&(O(E,f),N("last_duration_change",E),N("current_time",a))},y=a=>{if(window.analytics){const{collectionTitle:l,videoTitle:E}=t.siteContext,f={...nn(t,e,a),collection_title:l,video_title:E};window.analytics.track(a,f,_())}},V=({playerEvent:a,currentTime:l,duration:E})=>{if(!t)return;const{setVideoProperty:f}=t.siteContext,N=Math.floor(l),A=Math.ceil(E);f("current_time",N),f("duration",A),a==="timeupdate"?v({playerEvent:a,currentTime:l,duration:E}):a==="play"?P({playerEvent:a,currentTime:l,duration:E}):y(r[a])},Y=()=>{const{video:a,setVideoProperty:l}=t.siteContext;l("is_fullscreen",!a.is_fullscreen)},G=a=>{if(t=a,n=an(),window.VHX.video){const{setVideoProperty:l}=t.siteContext,E=n==null?void 0:n.getInstance(),f=window.VHX.video.isDRM==="false"?0:1,N=window.VHX.video.isTrailer==="false"?0:1;l("current_src",E==null?void 0:E.currentSrc()),l("is_chromecast",E==null?void 0:E.isCasting()),l("is_drm",f),l("is_fullscreen",E==null?void 0:E.isFullscreen()),l("is_trailer",N)}},c=a=>{const{eventName:l}=a.siteContext;window.analytics&&l&&(t=a,window.analytics.ready(()=>{const E=w(l);E&&window.analytics.track(E,u(),_())}))},T=a=>{const{eventName:l}=a.siteContext;t=a;const E=_(),f=m(a.transaction);if(window.analytics&&l){const N=w(l);if(N){const A={...u(),order_id:a.transaction.id,transaction_id:a.transaction.id};window.analytics.track(N,A,{...E,context:{...E.context,...f.context},traits:d(),revenue:f.revenue})}}},h=()=>{const{currentUser:a,currentSite:l}=t.siteContext;l.segment_includes_user_id&&a.id?window.analytics.user().id()!==String(a.id)&&window.analytics.user().id(a.id):window.analytics.user().id(null)},g=()=>{const{currentSite:a,currentUser:l}=t.siteContext;if(l.id){const E={..._(),traits:void 0};a.segment_includes_user_id?window.analytics.identify(l.id,d(),E):window.analytics.identify(d(),_())}else window.analytics.reset()},C=a=>{const{eventName:l}=a.siteContext;t=a,window.analytics&&l&&g()},b=a=>{t=a,window.analytics&&window.analytics.ready(()=>{h(),window.analytics.page(Oe(t.siteContext),i(),_())})},U=a=>{const{eventName:l}=a.siteContext;if(window.analytics&&l){t=a;const E=w(l),f=new URLSearchParams(window.location.search),N={...u(),search_query:f.get("q")};E&&window.analytics.track(E,N,_())}};(()=>{if(!window.Segment_ID)return;const a=[e.EVENTS.EVENT_AUTHENTICATION_IDENTIFY_USER,e.EVENTS.EVENT_AUTHENTICATION_SIGNIN_COMPLETE,e.EVENTS.EVENT_SETTINGS_SAVE_PROFILE,e.EVENTS.EVENT_SETTINGS_SAVE_CARD,e.EVENTS.EVENT_SETTINGS_SAVE_NOTIFICATIONS];Object.entries(e.EVENTS).forEach(l=>{const E=l[1];E===e.EVENTS.EVENT_AUTHENTICATION_CONVERSION?S.subscribe(E,T):E===e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED?S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,T):a.includes(E)?S.subscribe(E,C):E===e.EVENTS.EVENT_SITE_PAGE_VIEW?S.subscribe(E,b):E===e.EVENTS.EVENT_SITE_VIDEO_CLICK?S.subscribe(E,G):E===e.EVENTS.EVENT_SEARCH?S.subscribe(E,U):S.subscribe(E,c)}),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_SIGNIN_COMPLETE,c),Object.keys(r).forEach(l=>{S.subscribe(l,V)}),S.subscribe("fullscreenchange",Y)})()};class dn{constructor({page:t={},currentUser:n={},currentSite:r={}}){this.page=t,this.currentUser=n,this.currentSite=r,this.video={has_firstplay:!1,current_time:0,duration:0,last_duration_change:0,last_ten_seconds_tracked:0,segment_has_initialized:!1,has_watched_quartile_one:0,has_watched_quartile_two:0,has_watched_quartile_three:0,has_watched_quartile_complete:0,is_chromecast:0,is_drm:0,is_trailer:0,current_src:"",current_type:"video",is_live:0,is_fullscreen:0},this.setVideoProperty=this.setVideoProperty.bind(this)}set eventName(t){this._eventName=t}get eventName(){return this._eventName}set video(t){this._video=t}get video(){return this._video}get isEnabled(){return Object.keys(this.currentSite).length>0&&Object.keys(this.currentUser).length>0}get hasPageProperties(){return this.page&&Object.keys(this.page).length>0}get activeView(){var t,n;return((n=(t=this.page)==null?void 0:t.PROPERTIES)==null?void 0:n.VIEW_TYPE)||window.location.pathname.split("/")[1]}get productID(){var t,n,r;return Number(((n=(t=this.page)==null?void 0:t.PROPERTIES)==null?void 0:n.PRODUCT_ID)||this.currentProductId||((r=this.eventProps)==null?void 0:r.id)||null)}get collectionID(){var t,n,r;return((n=(t=this.page)==null?void 0:t.PROPERTIES)==null?void 0:n.COLLECTION_ID)||((r=this.eventProps)==null?void 0:r.id)||null}get collectionTitle(){var t,n,r;return((n=(t=this.page)==null?void 0:t.PROPERTIES)==null?void 0:n.COLLECTION_TITLE)||((r=this.eventProps)==null?void 0:r.label)||null}set eventProps(t){this._eventProps=t}get eventProps(){return this._eventProps||{}}get videoID(){var t,n,r;return((n=(t=this.page)==null?void 0:t.PROPERTIES)==null?void 0:n.VIDEO_ID)||((r=this.eventProps)==null?void 0:r.id)||null}get videoTitle(){var t,n,r;return((n=(t=this.page)==null?void 0:t.PROPERTIES)==null?void 0:n.VIDEO_TITLE)||((r=this.eventProps)==null?void 0:r.label)||Zt("og:title")||null}get isGDPRProtected(){return window.location.search.indexOf("no_cookies=1")!=-1||z.get("gcp")==="0"}get isMadeForKids(){return this.currentSite.made_for_kids}get isTrackingDisabled(){return Object.keys(this.currentSite).length>0?this.isGDPRProtected||this.isMadeForKids&&this.currentSite.made_for_kids_tracking_blocked:this.isGDPRProtected}get isAdminVisit(){return window.location.pathname.indexOf("/admin")!==-1}get isVideoView(){return this.activeView==="video"}get currentProductId(){return typeof window.VHX.data.product=="object"?Number(window.VHX.data.product.id):typeof window._vhx.product=="object"?Number(window._vhx.product.id):null}get canonicalCollection(){var t,n,r;return((t=this.eventProps)==null?void 0:t.canonical_collection)||((r=(n=this.page)==null?void 0:n.PROPERTIES)==null?void 0:r.CANONICAL_COLLECTION)||null}setPageProperty(t,n){var o;const r=(o=this.page)==null?void 0:o.PROPERTIES;this.page.PROPERTIES={...r,[t]:n}}getPageProperty(t){var n;(n=this.page)==null||n.PROPERTIES[t]}setVideoProperty(t,n){this._video[t]=n}}const un=e=>{const{currentUser:t}=e.siteContext;return{9867:()=>{W("https://5039270.fls.doubleclick.net/activityi;src=5039270;type=black00;cat=blksxybp;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1?")},22104:()=>{const n=n||[];t.email&&(n.push(["identify",{$email:t.email}]),n.push(["track","Started Checkout",{}])),new Image().src="https://images.inthe.net/api/GetImage?type=tp&ad_act_type=7d19a336-f3b3-408e-a6b3-0a98998f0b44&ad_id=ea4cf077-de7b-4ece-9505-68a37aba55a3&vender=VetTV_Checkout"},27600:()=>{new Image().src="//in.getclicky.com/101014264ns.gif"},30697:()=>{new Image().src="https://secure.adnxs.com/px?id=934372&t=1"},44887:()=>{const n="https://u.fg8dgt.com/pixel?type=js&id=434&cb="+Math.floor(Math.random()*1e8);be(n)},105720:()=>{const n=document.createElement("script");n.type="text/javascript",n.src="https://cactusmedia.com/js/p-06032020.js",document.body.parentNode.insertBefore(n,document.body.nextSibling);const r=document.createElement("script");r.type="text/javascript",r.src="https://www.tp88trk.com/scripts/sdk/everflow.js",document.body.parentNode.insertBefore(r,document.body.nextSibling),window.EF&&window.EF.click({offer_id:window.EF.urlParameter("oid"),sub1:window.EF.urlParameter("sub1"),sub2:window.EF.urlParameter("sub2"),sub3:window.EF.urlParameter("sub3"),sub4:window.EF.urlParameter("sub4"),sub5:window.EF.urlParameter("sub5"),uid:window.EF.urlParameter("uid"),transaction_id:window.EF.urlParameter("tid")})},92559:()=>{new Image().src="https://tags.w55c.net/rs?id=e23117610b84432cba12d0a1135ddecc&t=cart&sku="+window.VHX.data.product.sku}}},_n=e=>{const{siteContext:{currentUser:t},transaction:n}=e;return{1251:()=>{new Image().src="https://secure.adnxs.com/px?id=192571&order_id=[ORDER_ID]&value=[REVENUE]&t=2"},125888:()=>{const r=new Image;r.src="https://insight.adsrvr.org/track/pxl/?adv=b25nneq&ct=0:8cispjt&fmt=3",r.width="1",r.height="1",r.style="border-style:none"},90968:()=>{const r=new Image;r.src="https://segment.prod.bidr.io/associate-segment?buzz_key=dsp&segment_key=dsp-6448&value=",r.width="0",r.height="0";const o=new Image;o.src="https://cnv.event.prod.bidr.io/log/cnv?tag_id=191&buzz_key=dsp&value=&segment_key=dsp-6448&account_id=39&order=1&ord=1",o.width="0",o.height="0"},4004:()=>{if(n.product_id===3865){const r=`https://4338601.fls.doubleclick.net/activityi;src=4338601;type=purch1;cat=wpmh01;qty=1;cost=${n.amount.format};ord=${n.id}?`;W(r)}},7218:()=>{const s=`https://4533508.fls.doubleclick.net/activityi;src=4533508;type=afc-ats;cat=atsconfm;ord=${(Math.random()+"")*1e13}?`;W(s),window.friendbuy=window.friendbuy||[],window.friendbuy.push(["site","site-b6444db1-www.againstthesun.com"]),window.friendbuy.push(["track","customer",{id:n.user_id,email:n.user_email}]),window.friendbuy.push(["track","order",{id:n.id,amount:n.amount.cents/100}]),be("https://djnf6e5yyirys.cloudfront.net/js/friendbuy.min.js")},7247:()=>{new Image().src="https://dc.ads.linkedin.com/collect/?pid=321466&conversionId=365345&fmt=gif"},11725:()=>{var r=n.amount.cents/100,o=n.id;window.tbEvents=[],window.tbEvents.push({eventName:"purchase",eventAmount:r,orderKey:o}),new Image().src=`https://tradablebits.com/pixels/7177498/event?event_name=purchase&event_amount=${r}&order_key=${o}`},108459:()=>{var r=n.id,o=n.amount.cents/100,s=s||[];s.push({qacct:"p-2UPkbcw6Ne-Tf",labels:"_fp.event.Player Purchase Confirmation",orderid:`${r}`,revenue:`${o}`,event:"refresh"})},18790:()=>{if(window.Attribution){var r="";z.get("anonymousAttribution")?r=z.get("anonymousAttribution"):context.getParams("anon")&&(r=context.getParams("anon")),window.Attribution.alias(n.user_id,r),window.Attribution.identify(n.user_id,{name:n.user_name,email:n.user_email,product_id:n.product_id,createdAt:new Date}),window.Attribution.track("Completed Purchase",{revenue:n.amount.cents/100})}window.mbsy&&(window.mbsy.identify({email:t.email}),window.mbsy.track({revenue:n.amount.cents/100}));const o=new Image;o.src=`https://ad.doubleclick.net/ddm/activity/src=11893105;type=mhzsa0;cat=start0;qty=1;cost={transaction.amount.format};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=;gdpr_consent=;ord=${n.id}?`,o.width="1",o.height="1",typeof gtag=="function"&&window.gtag("event","purchase",{send_to:"DC-11893105/mhzsa0/start0+transactions",value:n.amount.cents/100,transaction_id:n.id})},20255:()=>{new Image().src=`https://www.clickmeter.com/conversion.aspx?id=B3F97E49EE2C40CE82091CF0A787F0B6&val=${n.amount.cents/100}&param=${n.product_name}&com=0.00&comperc=0.00`},22104:()=>{const r=n.amount.cents/100,o=new Date,s=s||[];s.push(["identify",{$email:n.user_email}]),s.push(["track","Placed Order",{customer_properties:{$email:n.user_email,$first_name:n.user_name},properties:{$event_id:n.id,$value:r,ItemNames:["Veteran Television Subscription"]},Items:[{SKU:"VETTV_SVOD",ProductName:"Veteran Television Subscription",Quantity:1}],time:o}]),window._conv_q=window._conv_q||[],window._conv_q.push(["pushRevenue",r,"1","100312760"])},24862:()=>{const r=`https://ashleyborden.ositracker.com/sales/salejs/amount:${n.amount.cents/100}/transaction:${n.id}/firstname:FIRST_NAME/lastname:LAST_NAME`;W(r)},27600:()=>{new Image().src="//in.getclicky.com/101014264ns.gif"},28998:()=>{new Image().src="https://servedbyadbutler.com/convtrack.spark?ID=170140",typeof gtag=="function"&&window.gtag("event","conversion",{send_to:"AW-842820571/CggmCKrCxHoQ29fxkQM",transaction_id:n.id})},30697:()=>{new Image().src="https://secure.adnxs.com/px?id=934366&t=1"},31496:()=>{const r=setInterval(function(){typeof _refersion=="function"&&(clearInterval(r),window._refersion(function(){window._rfsn._addTrans({order_id:n.id,currency_code:"USD"}),window._rfsn._addCustomer({first_name:n.user_name,email:n.user_email}),window._rfsn._addItem({sku:n.product_id,quantity:"1",price:n.amount.cents/100}),window._rfsn._sendConversion()}))},500)},88695:()=>{var r=n.is_free_trial?0:n.amount.cents/100;const o=setInterval(function(){typeof _refersion=="function"&&(clearInterval(o),window._refersion(function(){window._rfsn._addTrans({order_id:n.id,currency_code:"USD"}),window._rfsn._addCustomer({first_name:n.user_name,email:n.user_email}),window._rfsn._addItem({sku:n.product_id,quantity:"1",price:r}),window._rfsn._sendConversion()}))},500)},38126:()=>{var r=n.is_free_trial?0:n.amount.cents/100;const o=setInterval(function(){typeof _refersion=="function"&&(clearInterval(o),window._refersion(function(){window._rfsn._addTrans({order_id:n.id,currency_code:"USD",discount_code:n.promo_code}),window._rfsn._addCustomer({first_name:n.user_name,email:n.user_email}),window._rfsn._addItem({sku:n.product_id,quantity:"1",price:r}),window._rfsn._sendConversion()}))},500)},32557:()=>{window.mbsy&&(window.mbsy.identify({email:t.email}),window.mbsy.track({revenue:n.amount.cents/100}))},33064:()=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"signup-success"})},44887:()=>{typeof gtag=="function"&&(window.dataLayer=window.dataLayer||[],window.gtag("event","conversion",{send_to:"AW-865543806/CWQxCImeuIYBEP7M3JwD"}))},61429:()=>{var m;var r=localStorage.getItem("ajs_user_traits"),o=(m=JSON.parse(r))==null?void 0:m.email;if(o.length){var s=btoa(o);window._refersion(function(){window._rfsn._addCart(s)})}else window._refersion();var u=n.user_id,i=u.toString(),d={debug:"false",parameters:{firstname:n.user_name,email:n.user_email,externalidentifier:i,amount:n.amount.cents}},_=window.rrSpace;if(_.executeEvent("conversion",d),typeof gtag=="function"){const w=n.amount.cents/100,p=new Date;window.dataLayer=window.dataLayer||[],window.gtag("event","transaction",{currency:n.amount.currency,transaction_id:n.id,value:w,category:n.purchase_type,orderPromoCode:n.promo_code,date:p,items:[{item_id:n.product_id,item_name:n.product_name,item_category:n.purchase_type,value:w,quantity:n.units}]}),window.gtag("customer",{firstname:n.user_name,email:n.user_email,id:n.user_id})}},87218:()=>{window.mbsy&&(window.mbsy.identify({email:t.email}),window.mbsy.track({revenue:n.amount.cents/100}));var r=n.is_free_trial?0:n.amount.cents/100;const o=setInterval(function(){typeof _refersion=="function"&&(clearInterval(o),window._refersion(function(){window._rfsn._addTrans({order_id:n.id,currency_code:"USD"}),window._rfsn._addCustomer({first_name:n.user_name,email:n.user_email}),window._rfsn._addItem({sku:n.product_id,quantity:"1",price:r}),window._rfsn._sendConversion()}))},500)},138067:()=>{var r=n.is_free_trial?0:n.amount.cents/100;const o=setInterval(function(){typeof _refersion=="function"&&(clearInterval(o),window._refersion(function(){window._rfsn._addTrans({order_id:n.id,currency_code:"USD"}),window._rfsn._addCustomer({first_name:n.user_name,email:n.user_email}),window._rfsn._addItem({sku:n.product_id,quantity:"1",price:r}),window._rfsn._sendConversion()}))},500)},89479:()=>{typeof growsumo=="object"&&(window.growsumo.data.name=n.user_name,window.growsumo.data.email=n.user_email,window.growsumo.data.customer_key=n.user_email,window.growsumo.createSignup())},92559:()=>{var r=n.amount.cents/100;new Image().src=`https://tags.w55c.net/rs?id=2f3de766ba814e09a00ac96795b571b1&t=checkout&tx=${n.id}&sku=${n.product_sku}price=${r}`,typeof gtag=="function"&&window.gtag("event","conversion",{send_to:"AW-653956162/ZnpDCMO3t80BEMKo6rcC",value:r,currency:n.amount.currency})},103125:()=>{var r=n.amount.cents/100;typeof gtag=="function"&&window.gtag("event","conversion",{send_to:"AW-499481611/0seWCISQ7-QCEIv4le4B",value:r,currency:n.amount.currency})},84150:()=>{window.ire("trackConversion",23208,{orderId:n.id,customerId:n.user_id,customerEmail:"",currencyCode:n.amount.currency,orderPromoCode:n.promo_code,items:[{subTotal:n.amount.cents/100,category:n.subscription_frequency,sku:n.product_sku,quantity:1}]},{verifySiteDefinitionMatch:!0}),window.Attribution&&(window.Attribution.identify({email:n.user_email}),window.Attribution.track("trackConversion",{customer_id:n.user_id,email:n.user_email,revenue:n.amount.cents/100,currency:n.amount.currency,promo_code:n.promo_code,payment_method_type:n.payment_method_type}))},71759:()=>{n.purchase_type==="subscription"?window.ire("trackConversion",24992,{orderId:n.id,customerId:n.user_id,customerEmail:"",currencyCode:n.amount.currency,orderPromoCode:n.promo_code},{verifySiteDefinitionMatch:!0}):n.purchase_type==="purchase"&&window.ire("trackConversion",24994,{orderId:n.id,customerId:n.user_id,customerEmail:"",currencyCode:n.amount.currency,orderPromoCode:n.promo_code,items:[{subTotal:n.amount.cents/100,category:n.purchase_type,sku:n.product_sku,quantity:1}]},{verifySiteDefinitionMatch:!0})},105720:()=>{new Image().src="https://cactusmedia.com/js/pe1v2-07022020.js",new Image().src="https://tag.simpli.fi/sifitag/5335f080-72e9-0139-af88-06a60fe5fe77",W("https://ahghe.com/v/1/c/p/1/o/28044");const o=new Image;o.src="https://pixel.sitescout.com/iap/b40da9a9030f8c49",o.width="1",o.height="1",o.style="position: absolute",o.left="-150px";const s=n.amount.cents/100,u=new Image;u.src=`https://www.shareasale.com/sale.cfm?tracking=${n.id}&amount=${s}&merchantID=102817&transtype=sale&skulist=${n.product_sku}&pricelist=${s}&quantitylist=${n.units}&currency=${n.amount.currency}`,u.height="1",u.width="1";const i=document.createElement("script");i.innerHTML=`(function(){var x=null,p,q,m, o="32450", l=${n.id}, i=${s}, c="", k="",
g="", j="", u="", shadditional="";
try{p=top.document.referer!==""?encodeURIComponent(top.document.referrer.substring(0,512)):""}catch(n){p=document.referrer!==null?document.referrer.toString().substring(0,512):""}try{q=window&&window.top&&document.location&&window.top.location===document.location?document.location:window&&window.top&&window.top.location&&""!==window.top.location?window.top.location:document.location}catch(b){q=document.location}try{m=parent.location.href!==""?encodeURIComponent(parent.location.href.toString().substring(0,512)):""}catch(z){try{m=q!==null?encodeURIComponent(q.toString().substring(0,512)):""}catch(h){m=""}}var
A,y=document.createElement("script"),w=null,v=document.getElementsByTagName("script"),t=Number(v.length)-1,r=document.getElementsByTagName("script")[t];if(typeof
A==="undefined"){A=Math.floor(Math.random()*100000000000000000)}w="dx.mountain.com/spx?conv=1&shaid="+o+"&tdr="+p+"&plh="+m+"&cb="+A+"&shoid="+l+"&shoamt="+i+"&shocur="+c+"&shopid="+k+"&shoq="+g+"&shoup="+j+"&shpil="+u+shadditional;y.type="text/javascript";y.src=("https:"===document.location.protocol?"https://":"http://")+w;r.parentNode.insertBefore(y,r)}());`,document.body.appendChild(i);const d=document.createElement("script");d.type="text/javascript",d.defer="defer",d.src="https://www.dwin1.com/19038.js",document.body.appendChild(d);const _=new Image;_.src="//d.adroll.com/ipixel/CU7EEK6ZURBG7P6TZDFSGI/KREM3ZUWSRGDBBHFISXS5L?name=34e9ca5c",_.height="1",_.width="1",new Image().src="https://www.tp88trk.com/scripts/sdk/everflow.js",window.EF.conversion({aid:293}),window._ubaq=window._ubaq||[],window._ubaq.push(["trackGoal","convert"]);const m=document.createElement("script");m.type="text/javascript",m.src="https://d3pkntwtp2ukl5.cloudfront.net/uba.js",document.body.appendChild(m),window.ndp("track","CONVERSION");const w=new Image;w.src="https://flask.nextdoor.com/pixel?pid=dd5a87eb-83d4-4f10-bf31-41d427b72590&ev=CONVERSION&noscript=1",w.height="1",w.width="1";const p=new Image;p.src="https://pixel.tvsciapi.com/pixel?l=tvscientific-pix-o-923a385e-4205-4412-af3a-2440df5116c1",p.width="0",p.height="0",p.style="display: none";const P=document.createElement("script");P.innerHTML=`(function () {var p, s, d, w;d = document;w = window.location;p = d.createElement("IMG");s =
w.protocol + "//pix.pub/t.png?&t=" + (new Date).getTime() +
"&l=tvscientific-pix-o-923a385e-4205-4412-af3a-2440df5116c1&u3=" + encodeURIComponent(w.href) +
"&u1=complete_purchase&u2=${s}&u4=${n.id}&u5=";p.setAttribute("src", s);p.setAttribute("height",
"1");p.setAttribute("width", "1");d.body.appendChild(p);})();`,document.body.appendChild(P),typeof window.AdelphicUniversalPixel=="function"&&new window.AdelphicUniversalPixel(105431,"https://ad.ipredictive.com/d/track/event",{tn:n.id,val:n.amount.cents/100,ps:"0"}).fire();const O=rn("cjevent");var v="https://www.emjcd.com/u?CID=1565528&TYPE=437766&METHOD=IMG";O&&(v+="&CJEVENT="+O),v+="&OID="+n.id,v+="&CURRENCY="+n.amount.currency,n.promo_code&&(v+="&COUPON="+n.promo_code),v+="&AMOUNT="+n.amount.cents/100;const y=new Image;y.src=v},95172:()=>{new Image().src=`https://mistingsmarket.com/p.ashx?o=2487&e=585&fjs&t=${n.id}`},113239:()=>{const r=n.amount.cents/100,o=new Image;o.src=`https://www.shareasale.com/sale.cfm?tracking=${n.id}&amount=${r}&merchantID=107127&transtype=sale&skulist=${n.product_sku}&pricelist=${r}&quantitylist=${n.units}&currency=${n.amount.currency}`,o.height="1",o.width="1";const s=document.createElement("script");s.type="text/javascript",s.defer="defer",s.src="https://www.dwin1.com/19038.js",document.body.appendChild(s),new Image().src="https://www.dlap2tk.com/scripts/sdk/everflow.js",window.EF.conversion({aid:1,amount:r,email:n.user_email})},91041:()=>{const r=n.amount.cents/100,o=new Image;o.src=`https://www.shareasale.com/sale.cfm?tracking=${n.id}&amount=${r}&merchantID=1202861&transtype=sale&skulist=${n.product_sku}&pricelist=${r}&quantitylist=${n.units}&currency=${n.amount.currency}`,o.height="1",o.width="1";const s=document.createElement("script");s.type="text/javascript",s.defer="defer",s.src="https://www.dwin1.com/19038.js",document.body.appendChild(s)},107227:()=>{window.pintrk&&window.pintrk("track","checkout",{order_quantity:1})},129746:()=>{const r=n.referrer,o=n.amount.currency,s=n.promo_code,u=0,i=n.id,d=n.amount.cents/100,_=`DEFAULT:${d}`;var m={};m.Tracking={},m.Tracking.Sale={},m.Tracking.Sale.amount=d,m.Tracking.Sale.channel=r,m.Tracking.Sale.orderRef=i,m.Tracking.Sale.parts=_,m.Tracking.Sale.currency=o,m.Tracking.Sale.voucher=s,m.Tracking.Sale.test=u;var w=document.createElement("script");w.src="https://www.dwin1.com/19522.js",w.type="text/javascript",w.setAttribute("defer","defer"),document.body.appendChild(w),new Image().src=`https://www.awin1.com/sread.img?tt=ns&tv=2&merchant=19522&amount=${d}&cr=${o}&ref=${i}&parts=${_}&vc=${s}&ch=${r}&testmode=${u}`},139215:()=>{const r=n.amount.cents/100,o=n.id,s=new Date().toISOString().replace(/T/,"-").replace(/\..+/,"").replace(/:/g,"-");n.subscription_frequency==="monthly"?new Image().src=`https://pm.geniusmonkey.com/gm.png?id=226593869&quantity=${r}&confirmation_code=${o}&purchase_date=${s}`:n.subscription_frequency==="yearly"&&(new Image().src=`https://pm.geniusmonkey.com/gm.png?id=226593868&quantity=${r}&confirmation_code=${o}&purchase_date=${s}`)}}},En=e=>{const t=o=>{var s,u,i;try{(i=(u=un(o))[(s=o.siteContext.currentSite)==null?void 0:s.id])==null||i.call(u)}catch(d){console.log(d)}},n=o=>{var s,u,i;try{(i=(u=_n(o))[(s=o.siteContext.currentSite)==null?void 0:s.id])==null||i.call(u)}catch(d){console.log(d)}};(()=>{S.subscribe("site_checkout_page_open",t),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_CONVERSION,n),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,n)})()},ln=e=>{const t=(i,d,_)=>{typeof window.twq=="function"&&(i==null||i.forEach(m=>{(m.product_id&&m.product_id===d||!m.product_id)&&_(m)}))},n=i=>{const{currentSite:{twitter_pixel_codes:d},currentProductId:_}=i.siteContext;t(d,_,()=>{window.twq("track","CompleteRegistration",{num_items:"1"})})},r=i=>{const{currentSite:{twitter_pixel_codes:d}}=i.siteContext,_=i.transaction;t(d,_.product_id,()=>{window.twq("track","Purchase",{value:_.amount.cents/100,currency:_.amount.currency,num_items:"1",content_type:"product",content_ids:_.product_id,content_name:_.product_sku,order_id:_.id})})},o=i=>{const{currentSite:{twitter_pixel_codes:d},currentProductId:_}=i.siteContext;t(d,_,()=>{window.twq("track","InitiateCheckout")})},s=i=>{const{currentSite:{twitter_pixel_codes:d},currentProductId:_}=i.siteContext;i.siteContext.isVideoView||t(d,_,m=>{window.twq("init",m.pixel_code),window.twq("track","PageView")})};(()=>{S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_REGISTRATION,n),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_CONVERSION,r),S.subscribe(e.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED,r),S.subscribe("site_checkout_page_open",o),S.subscribe(e.EVENTS.EVENT_SITE_PAGE_VIEW,s)})()};class mn{constructor(t){this.tracking=t.tracking,this.siteContext=new dn(t),this._init()}_init(){[Xt,zt,Kt,on,cn,ln,En].forEach(t=>{t(this.tracking)})}trackEvent(t,n){const{isEnabled:r,isTrackingDisabled:o}=this.siteContext;if(!r||o)return;const s=tn(t,this.tracking);s&&(this.siteContext.eventName=s,S.publish(s,{siteContext:this.siteContext,trackingData:n||{}}))}trackSale(t){const{gdprProtected:n}=this.siteContext;if(n)return;const r=t.isTvod?this.tracking.EVENTS.EVENT_AUTHENTICATION_PURCHASE_COMPLETED:this.tracking.EVENTS.EVENT_AUTHENTICATION_CONVERSION;r&&(this.siteContext.eventName=r,S.publish(r,{siteContext:this.siteContext,transaction:t}))}}const k={tracking:window.Tracking||{},page:window.Page||{},currentUser:window._current_user||{},currentSite:window._current_site||{}},Tn=()=>{const e=(o,s,u)=>{s==="video"?window.Stats.siteContext.setPageProperty("VIDEO_ID",u):window.Stats.siteContext.setPageProperty("COLLECTION_ID",u),o==="my-list-added"?(window.Stats.siteContext.setPageProperty("NAME","addwatchlist"),window.Stats.trackEvent(k.tracking.EVENTS.EVENT_SITE_WATCHLIST_ADD)):o==="my-list-removed"&&(window.Stats.siteContext.setPageProperty("NAME","removewatchlist"),window.Stats.trackEvent(k.tracking.EVENTS.EVENT_SITE_WATCHLIST_REMOVE))},t=()=>{function o(){const u=$(this).data("track-event-properties"),i=$(this).attr("href");window.Stats.siteContext.eventProps={...u,url:i},window.Stats.trackEvent($(this).data("track-event"),{...u,url:i})}function s(){const u=$(this).data("track-event-properties");window.Stats.siteContext.eventProps=u,window.Stats.trackEvent($(this).data("track-event"),u)}$(document).on("click","a[data-track-event]",o),$("form[data-track-event]").on("submit",s),$(window).on("tracking:propertyChange",(u,i)=>{window.Stats.siteContext.setPageProperty("NAME",i)}),document.addEventListener("my-list-added",u=>{var i,d;(i=u.detail)!=null&&i.type&&((d=u.detail)!=null&&d.id)&&e("my-list-added",u.detail.type,parseInt(u.detail.id))}),document.addEventListener("my-list-removed",u=>{var i,d;(i=u.detail)!=null&&i.type&&((d=u.detail)!=null&&d.id)&&e("my-list-removed",u.detail.type,parseInt(u.detail.id))}),window.addEventListener("message",u=>{let i={};if(u.data&&typeof u.data=="string")try{i=JSON.parse(u.data)}catch{console.warn("Unexpected message",u)}i.method==="watchlistadded"&&e("my-list-added","video",window.Stats.siteContext.videoID),i.method==="watchlistremoved"&&e("my-list-removed","video",window.Stats.siteContext.videoID)},!1),$("body").on("search:complete",()=>{window.Stats.trackEvent(k.tracking.EVENTS.EVENT_SEARCH)}),$("body").on("switch:triggered",()=>{window.Stats.trackEvent(k.tracking.EVENTS.EVENT_SITE_PAGE_VIEW)})},n=()=>{var s;window.Stats.trackEvent(k.tracking.EVENTS.EVENT_SITE_PAGE_VIEW),window.location.pathname.includes("/checkout")&&window.Stats.trackEvent("site_checkout_page_open"),z.get("logged_in")==="1"&&(window.Stats.trackEvent(k.tracking.EVENTS.EVENT_AUTHENTICATION_SIGNIN_COMPLETE),window.Stats.trackEvent(k.tracking.GOOGLE_ANALYTICS_4.EVENTS.LOGIN,{method:Ce}),z.remove("logged_in"));const o=$("body").data("track-event");o&&o.indexOf("site_")===-1&&window.Stats.trackEvent(o),((s=k.page.PROPERTIES)==null?void 0:s.VIEW_TYPE)==="video"&&window.Stats.trackEvent(k.tracking.EVENTS.EVENT_SITE_VIDEO_CLICK)};return{init:()=>{n(),t()}}};window.Stats=new mn(k);window.addEventListener("load",()=>{Tn().init()});const Ae="FETCH_USER_SITE_DATA",Ve="FETCH_INITIAL_DATA_FAILURE",Re="UPDATE_CURRENT_PURCHASE",ke="UPDATE_PURCHASED_STATUS",De="FETCH_FEATURE_FLAGS",Ue="SET_API_V2_CONFIG",pn=()=>e=>fetch("/customers/data",{method:"GET",headers:I,credentials:"same-origin"}).then(L).then(t=>e({type:Ae,data:t})).catch(t=>{e({type:Ve,data:t}),console.warn(t)}),Mr=e=>t=>{t({type:Re,currentPurchaseType:e})},Hr=e=>async t=>{const r=await(await fetch(`/customers/purchase_status/${e}`,{method:"GET",headers:I,credentials:"include"})).json();return t({type:ke,hasPurchasedProduct:r.status,preexistingProcessingTransaction:r.preexisting_processing_transaction}),r.status},hn=()=>async e=>{const n=await(await fetch("/customers/feature_flags/",{method:"GET",headers:I,credentials:"same-origin"})).json();e({type:De,featureFlags:n})},wn=()=>e=>{e({type:Ue,apiV2Config:{api_v2_url:window.VHX.config.api_v2_url,api_v2_token:window.VHX.config.token}})},fn=async e=>{if(e)try{return await Sn()}catch{}return null},Sn=()=>new Promise((e,t)=>{window.grecaptcha.enterprise.ready(()=>{try{window.grecaptcha.enterprise.execute(window.ott_recaptcha.SITE_KEY,{action:window.ott_recaptcha.ACTIONS.SIGNUP}).then(n=>{e(n)})}catch{t()}})});var gn="Expected a function";function Nn(e){if(typeof e!="function")throw new TypeError(gn);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var yn=Nn,In=Gt,Pn=ye,vn=wt,Cn=Mt;function On(e,t){if(e==null)return{};var n=In(Cn(e),function(r){return[r]});return t=Pn(t),vn(e,n,function(r,o){return t(r,o[0])})}var bn=On,An=ye,Vn=yn,Rn=bn;function kn(e,t){return Rn(e,Vn(An(t)))}var Dn=kn;const xe=rt(Dn),Un=e=>e&&decodeURIComponent(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),x=e=>{const t=window.location.search.replace("?","");return Un(t.substr(t.indexOf(`${e}=`)).split("&")[0].split("=")[1])},xn=()=>{if(!window.URLSearchParams)return D(()=>Promise.resolve().then(()=>qn),void 0).then(n=>{const o=new n(window.location.search).get("return_to");return o?Te(o):null});const t=new URLSearchParams(window.location.search).get("return_to");return t?Te(t):null},fe=e=>e&&e.discount_percent>0,Fr=(e,t)=>{if(e.is_subscription)return x("plan")!==vt&&(x("code")||x("promocode")||x("plan")===Ct||x("monthly")==="1")?t.monthly||t.yearly:t.yearly||t.monthly;if(x("code")){if(fe(t.purchase))return t.purchase;if(fe(t.rent))return t.rent}return x("rent")==="1"?t.rent||t.pwyw||t.purchase:t.pwyw||t.purchase||t.rent},J=(e,t)=>e.id&&F(t),F=e=>e.is_subscription&&e.is_free,q=(e,t)=>`/checkout/${e.is_subscription?"subscribe":e.sku}/${t}${location.search}`,Q=e=>q(e,"receipt"),Ln=e=>q(e,"processing"),X=e=>q(e,"signup"),Gn=e=>q(e,"login"),B=e=>q(e,"purchase"),Mn=e=>q(e,"gift"),Hn=e=>e.discount_percent===100,$r=e=>Hn(e)&&$n(e),Fn=e=>Ot.includes(e.frequency),$n=e=>bt.includes(e.frequency),jr=e=>At.includes(e.frequency),qr=e=>!!e.id,Yr=(e,t)=>{const n=Number(e);return Math.round(n*(t?1:100))},Wr=()=>window.innerWidth<=480,Br=(e,t=window)=>{const n=e.is_subscription?"subscribe":e.sku;return t.location.pathname.includes(`/checkout/${n}/gift`)},Xr=()=>{const t={method:"POST",headers:{Accept:"application/json",...I}},n=()=>`${xn()||window.location.pathname+window.location.search}`;fetch("/logout",t).then(L).then(()=>{window.location.href=n()})},Le=e=>{window._current_user.id=e.id,window._current_user.name=e.name,window._current_user.email=e.email},zr=(e,t,n,r,o)=>{r(o);const s=o===Pe?Gn(e):X(e);n({from:"payment"}),t.push(s)},Kr=e=>ve().add(e,"days"),Jr=e=>Vt.includes(e),Qr=(e,t)=>ve().add(e,t.slice(0,-2)),Ge=(e,t)=>(t==null?void 0:t.conversion_event_value)||e.purchaseOption.conversion_event_value,jn=(e,t)=>{var r;const n={...Rt[e.purchaseOption.frequency],coupon:e.purchaseOption.promoCode,currency:(r=e.purchaseOption.currency)==null?void 0:r.toUpperCase(),discount:e.purchaseOption.conversion_event_discount,item_id:e.product.sku,item_name:e.product.name,price:Ge(e,t)};return xe(n,ee)},Me=(e,t)=>{var r;const n={checkout_method:t==null?void 0:t.payment_method_type,coupon:e.purchaseOption.promoCode,currency:(r=e.purchaseOption.currency)==null?void 0:r.toUpperCase(),discount:e.purchaseOption.conversion_event_discount,items:[jn(e,t)],tax:t==null?void 0:t.conversion_event_tax,transaction_id:t==null?void 0:t.id,user_id:e.customer.id,value:Ge(e,t)};return xe(n,ee)},Zr=(e,t)=>{window.Stats.trackEvent(window.Tracking.GOOGLE_ANALYTICS_4.EVENTS.PURCHASE,Me(e,t))},eo=e=>{window.Stats.trackEvent(window.Tracking.GOOGLE_ANALYTICS_4.EVENTS.BEGIN_CHECKOUT,Me(e))},to=async(e,t,n)=>{const{error:r}=await e();r?t({message:r.message,resetElements:!0}):await n()},no={labels:"floating",variables:{fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',borderRadius:"3px",colorBackground:`${pe}`,colorTextPlaceholder:`${pe}`,colorWarning:`${se}`,colorDanger:`${se}`},rules:{".Input":{border:"1px solid rgb(179, 191, 200)"},".Input:focus":{outline:"1px solid transparent",border:`1px solid ${ie}`,boxShadow:`0 0 0 1px ${ie}`},".Input--invalid":{border:`1px solid ${se}`,boxShadow:"0 0 0 0",outline:"1px solid transparent",color:ie},".Label":{color:Ht,fontWeight:"400"},".Label--floating":{fontWeight:"750",fontSize:`${Ft}`}}};var Se={};(function(e){var t=function(){try{if(e.URLSearchParams&&new e.URLSearchParams("foo=bar").get("foo")==="bar")return e.URLSearchParams}catch{}return null}(),n=t&&new t({a:1}).toString()==="a=1",r=t&&new t("s=%2B").get("s")==="+",o=t&&"size"in t.prototype,s="__URLSearchParams__",u=t?function(){var c=new t;return c.append("s"," &"),c.toString()==="s=+%26"}():!0,i=_.prototype,d=!!(e.Symbol&&e.Symbol.iterator);if(t&&n&&r&&u&&o)return;function _(c){c=c||"",(c instanceof URLSearchParams||c instanceof _)&&(c=c.toString()),this[s]=y(c)}i.append=function(c,T){V(this[s],c,T)},i.delete=function(c){delete this[s][c]},i.get=function(c){var T=this[s];return this.has(c)?T[c][0]:null},i.getAll=function(c){var T=this[s];return this.has(c)?T[c].slice(0):[]},i.has=function(c){return G(this[s],c)},i.set=function(T,h){this[s][T]=[""+h]},i.toString=function(){var c=this[s],T=[],h,g,C,b;for(g in c)for(C=P(g),h=0,b=c[g];h<b.length;h++)T.push(C+"="+P(b[h]));return T.join("&")};var m=e.Proxy&&t&&(!r||!u||!n||!o),w;m?(w=new Proxy(t,{construct:function(c,T){return new c(new _(T[0]).toString())}}),w.toString=Function.prototype.toString.bind(_)):w=_,Object.defineProperty(e,"URLSearchParams",{value:w});var p=e.URLSearchParams.prototype;p.polyfill=!0,!m&&e.Symbol&&(p[e.Symbol.toStringTag]="URLSearchParams"),"forEach"in p||(p.forEach=function(c,T){var h=y(this.toString());Object.getOwnPropertyNames(h).forEach(function(g){h[g].forEach(function(C){c.call(T,C,g,this)},this)},this)}),"sort"in p||(p.sort=function(){var c=y(this.toString()),T=[],h,g,C;for(h in c)T.push(h);for(T.sort(),g=0;g<T.length;g++)this.delete(T[g]);for(g=0;g<T.length;g++){var b=T[g],U=c[b];for(C=0;C<U.length;C++)this.append(b,U[C])}}),"keys"in p||(p.keys=function(){var c=[];return this.forEach(function(T,h){c.push(h)}),v(c)}),"values"in p||(p.values=function(){var c=[];return this.forEach(function(T){c.push(T)}),v(c)}),"entries"in p||(p.entries=function(){var c=[];return this.forEach(function(T,h){c.push([h,T])}),v(c)}),d&&(p[e.Symbol.iterator]=p[e.Symbol.iterator]||p.entries),"size"in p||Object.defineProperty(p,"size",{get:function(){var c=y(this.toString());if(p===this)throw new TypeError("Illegal invocation at URLSearchParams.invokeGetter");return Object.keys(c).reduce(function(T,h){return T+c[h].length},0)}});function P(c){var T={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(c).replace(/[!'\(\)~]|%20|%00/g,function(h){return T[h]})}function O(c){return c.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/ig,function(T){return decodeURIComponent(T)})}function v(c){var T={next:function(){var h=c.shift();return{done:h===void 0,value:h}}};return d&&(T[e.Symbol.iterator]=function(){return T}),T}function y(c){var T={};if(typeof c=="object")if(Y(c))for(var h=0;h<c.length;h++){var g=c[h];if(Y(g)&&g.length===2)V(T,g[0],g[1]);else throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements")}else for(var C in c)c.hasOwnProperty(C)&&V(T,C,c[C]);else{c.indexOf("?")===0&&(c=c.slice(1));for(var b=c.split("&"),U=0;U<b.length;U++){var H=b[U],a=H.indexOf("=");-1<a?V(T,O(H.slice(0,a)),O(H.slice(a+1))):H&&V(T,O(H),"")}}return T}function V(c,T,h){var g=typeof h=="string"?h:h!=null&&typeof h.toString=="function"?h.toString():JSON.stringify(h);G(c,T)?c[T].push(g):c[T]=[g]}function Y(c){return!!c&&Object.prototype.toString.call(c)==="[object Array]"}function G(c,T){return Object.prototype.hasOwnProperty.call(c,T)}})(typeof oe<"u"?oe:typeof window<"u"?window:oe);const qn=jt({__proto__:null,default:Se},[Se]),de="UPDATE_CUSTOMER",Z="SELECT_PURCHASE_OPTION",He="SET_PRODUCT",Fe="SET_PRICES",$e="ERROR_OCCURRED",je="ERROR_RESET",qe="ERROR_RESET_ALL",Ye="UPDATE_PROCESSING_PURCHASE",We="SET_REGISTRATION_TYPE",Be="SET_SIGNUP_INFO",Xe="SET_LOGIN_INFO",Yn="SET_SIGNUP_INFO_VALIDITY",ze="SET_GIFT_PARAMS",Ke="SET_PURCHASE_TYPE_SELECTED",Je="CLEAR_FREE_TRIAL",Wn="FETCH_PURCHASE_STATUS",Bn="CONFIRM_PAYMENT_INTENT",Xn="FETCH_TRANSACTION_GATEWAY_RESPONSE",Qe="purchase",zn="tvod_gift",Kn=[Qe,zn],Ze=e=>e===Dt,M=e=>Ze(e)?Ut:xt,ro=e=>t=>{t({type:He,product:e})},oo=e=>t=>{!e.transaction&&e.currency&&e.subtotal&&e.country_code&&!Ze(e.account_type)&&(e={...e,tax_formatted:"$0",tax:0},fetch("/checkout/taxes.json",{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({currency:e.currency,subtotal:e.subtotal-(e.discount_value||0),country_code:e.country_code,postal_code:e.postal_code,has_recorded_content:e.has_recorded_content,purchase_type:Kn.includes(e.frequency)?Qe:""})}).then(n=>n.json()).then(n=>{t({type:Z,option:{tax_formatted:n.tax_formatted,tax:n.tax,total_formatted:n.total_formatted,inclusive_taxes:n.inclusive_taxes}})},n=>t({type:Z,option:{error_message:"could not calculate taxes"}}))),t({type:Z,option:e})};function ue(e,t){var r,o,s,u,i,d,_,m,w,p,P,O,v,y,V;let n=((o=(r=e.token)==null?void 0:r.card)==null?void 0:o.country)||((u=(s=e.paymentMethod)==null?void 0:s.card)==null?void 0:u.country);if(t){const G=new URLSearchParams(window.location.search).get("country");G&&(n=G)}return{payment_method_id:(i=e.paymentMethod)==null?void 0:i.id,token:(d=e.token)==null?void 0:d.id,country_code:n,postal_code:((m=(_=e.token)==null?void 0:_.card)==null?void 0:m.address_zip)||((P=(p=(w=e.paymentMethod)==null?void 0:w.billing_details)==null?void 0:p.address)==null?void 0:P.postal_code),name:((v=(O=e.token)==null?void 0:O.card)==null?void 0:v.name)||((V=(y=e.paymentMethod)==null?void 0:y.billing_details)==null?void 0:V.name)}}const so=(e,t)=>{const n=M(t),r=Object.assign(I,{"Cache-Control":"no-cache, no-store"});return o=>(o({type:Xn}),fetch(`${n}/${e}/retrieve`,{method:"GET",headers:r,credentials:"include"}).then(L))},io=(e,t)=>{const n=M(t),r=Object.assign(I,{"Cache-Control":"no-cache, no-store"});return o=>(o({type:Bn}),fetch(`${n}/${e}/confirm`,{method:"PUT",headers:r,credentials:"include"}).then(L))},ao=(e,t,n)=>{const r=Object.assign(I,{"Cache-Control":"no-cache, no-store"}),o=M(t),s=n?`${o}/${e}?verification_key=${n}`:`${o}/${e}`;return u=>(u({type:Wn}),fetch(s,{method:"GET",headers:r,credentials:"include"}).then(L))},co=e=>()=>fetch(M(e.account_type),{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({product_sku:e.productSku,code:e.promoCode,is_rental:e.isRental,card:{name:"",country_code:""}})}),uo=e=>()=>fetch(M(e.account_type),{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({card:ue(e.stripeResponse,e.checkoutCountryOverride),product_sku:e.productSku,code:e.promoCode,is_rental:e.isRental,donation_price:e.donationPrice,campaign:e.campaign})}),_o=e=>t=>{t({type:Ye,isProcessing:e})},Eo=e=>()=>fetch(M(e.account_type),{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({card:ue(e.stripeResponse,e.checkoutCountryOverride),frequency:e.frequency,product_type:kt,product_sku:e.productSku,code:e.promoCode,campaign:e.campaign,force_charge:e.forceCharge?"1":void 0,attribution:e.attributionFromUrl})}),lo=e=>()=>fetch(M(e.account_type),{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({user:{email:e.giftParams.senderEmail},product_sku:e.productSku,product_type:e.type,frequency:e.frequency,card:ue(e.stripeResponse,e.checkoutCountryOverride),is_rental:e.isRental,campaign:e.campaign,attribution:e.attributionFromUrl,gift:{emails:[e.giftParams.recipientEmail],message:e.giftParams.message,send_at:e.giftParams.sendAt,duration_months:e.durationMonths}})}),mo=e=>async t=>{var s;let n=await fn(e.recaptchaEnabled);const r=await fetch("/registration.json",{method:"POST",headers:I,credentials:"same-origin",body:JSON.stringify({campaign:e.campaign,email:e.email,marketing_opt_in:e.marketing_opt_in,name:e.name,password:e.password,product_sku:e.productSku,product_type:e.productType,send_email:e.send_email?1:0,captcha_token:n})}),o=await L(r);(s=o.metadata)!=null&&s.authenticity_token&&Pt(o.metadata.authenticity_token),t({type:de,data:o}),Le(o),window.Stats.trackEvent(window.Tracking.GOOGLE_ANALYTICS_4.EVENTS.SIGN_UP,{user_id:o.id,method:Ce}),window.Stats.trackEvent(window.Tracking.EVENTS.EVENT_AUTHENTICATION_IDENTIFY_USER)},Jn=e=>{const t=e.user,n=typeof t.thumbnail=="object"?t.thumbnail.small:t.thumbnail;return{...t,thumbnail:n}},To=e=>async t=>{var s,u,i;const n=JSON.stringify({...e}),r=await fetch("/login.json",{method:"POST",headers:I,credentials:"same-origin",body:n}),o=Jn(await L(r));t({type:de,data:o}),Le(o),(i=window.Stats)==null||i.trackEvent((u=(s=window.Tracking)==null?void 0:s.EVENTS)==null?void 0:u.EVENT_AUTHENTICATION_SIGNIN_COMPLETE)},po=({productId:e,checkoutCountryOverride:t=!1,countryCode:n="",postalCode:r="",promoCode:o="",donationPrice:s="",frequency:u=""})=>{if(t){const d=new URLSearchParams(window.location.search).get("country");d&&(n=d)}return async i=>{const d=await fetch(`/products/${e}/price_breakdowns?promo_code=${o}&country_code=${n}&postal_code=${r}&donation_price=${s}&frequency=${u}`,{method:"GET",headers:I,credentials:"include"}),_=await L(d);return await i({type:Fe,prices:_}),_}},ho=({from:e,id:t=null,message:n=null,notificationType:r=null}={})=>o=>{o({type:$e,payload:{from:e,id:t,message:n,notificationType:r}})},wo=({from:e}={})=>t=>{t({type:je,payload:{from:e}})},fo=()=>e=>{e({type:qe})},Qn=e=>t=>{t({type:We,registrationType:e})},So=e=>async t=>{await t({type:Be,signupInfo:e})},go=e=>async t=>{await t({type:Xe,loginInfo:e})},No=e=>async t=>{await t({type:ze,giftParams:e})},yo=e=>t=>{t({type:Ke,purchaseTypeSelected:e})},Io=()=>e=>{e({type:Je})},Po=e=>()=>fetch("/payment_method/update",{method:"PATCH",headers:I,credentials:"same-origin",body:JSON.stringify({id:e.id,postal_code:e.postalCode,user:e.user})}),Zn={auth_formatted:null,auth_currency:"USD",country_code:null,discount_formatted:null,discount_percent:null,error_message:"",frequency:"yearly",gift_formatted:null,gift_label:null,giftParams:{message:"",recipientEmail:"",sendAt:null,senderEmail:"",valid:!1},inclusive_taxes:!1,is_zero_decimal:!1,postal_code:null,pwywPrice:"",renewal_date:"",subtotal_formatted:null,conversion_event_discount:null,conversion_event_tax:null,conversion_event_value:null,subtotal:0,symbol:"$",tax_formatted:null,tax:0,total_formatted:null,total:0,type:"subscription",zero_formatted:null},er=(e=Zn,t)=>{switch(t.type){case Z:return Object.assign({},e,t.option);case ze:return{...e,giftParams:{...e.giftParams,...t.giftParams}};default:return e}},tr={prices:{yearly:{},monthly:{},gift_prices:[]}},et=window.VHX.data.paidSubscription||{},nr=Object.assign({},window.VHX.data.product,tr),rr=(e=et,t)=>e,or=(e=!ft(et),t)=>e,sr=(e=nr,t)=>{switch(t.type){case He:return Object.assign({},e,t.product);case Fe:return{...e,prices:{...t.prices,gift_prices:t.prices.gift_prices}};case Je:return{...e,has_free_trial:!1,force_charge:!0};default:return e}},ge={payment:null},ir=(e=ge,t)=>{const{type:n,payload:{from:r,message:o,id:s,notificationType:u}={}}=t;switch(n){case $e:return{...e,[r]:{message:o,id:s,notificationType:u}};case je:return{...e,[r]:null};case qe:return{...ge};default:return e}},ar=(e=!1,t)=>{switch(t.type){case Ye:return t.isProcessing;default:return e}},cr=(e=!1,t)=>{switch(t.type){case Ke:return t.purchaseTypeSelected;default:return e}},dr={registrationType:Lt,signupInfo:{name:"",email:"",password:"",newsLetterAgree:!!window.VHX.data.marketingOptinDefault,valid:!1},loginInfo:{email:"",password:"",valid:!1}},ur=(e=dr,t)=>{switch(t.type){case We:return{...e,registrationType:t.registrationType};case Be:return{...e,signupInfo:t.signupInfo};case Yn:return{...e,signupInfo:{...e.signupInfo,valid:t.valid}};case Xe:return{...e,loginInfo:t.loginInfo};default:return e}},_r=ce({purchaseOption:er,product:sr,hasPaidSubscriptionProduct:or,paidSubscriptionProduct:rr,error:ir,isProcessingPurchase:ar,purchaseTypeSelected:cr,registrationInfo:ur}),Er={customer:Object.assign({},window.VHX.data.customer),site:Object.assign({},window.VHX.data.site),hasPurchasedProduct:!!window.VHX.data.hasPurchasedProduct,preexistingProcessingTransaction:Object.assign({},window.VHX.data.preexistingProcessingTransaction),currentPurchaseType:"",adminPreview:window.VHX.data.adminPreview,featureFlags:{},checkoutCountryOverride:window.VHX.data.checkoutCountryOverride,geo:window._vhx.geo},lr=(e=Er,t)=>{switch(t.type){case Ae:return Object.assign({},e,t.data);case Ve:return Object.assign({},e,t.data);case de:return Object.assign({},e,{customer:t.data});case De:return Object.assign({},e,{featureFlags:t.featureFlags});case Ue:return Object.assign({},e,{apiV2Config:t.apiV2Config});case ke:return{...e,hasPurchasedProduct:t.hasPurchasedProduct,preexistingProcessingTransaction:t.preexistingProcessingTransaction};case Re:return{...e,currentPurchaseType:t.currentPurchaseType};default:return e}},mr=ce({current:lr}),Tr={found:it,global:mr,checkout:_r},pr=[{path:":sku?",getComponent:()=>D(()=>import("../ProductContainer.d27721ae.js").then(e=>e.P),["ProductContainer.d27721ae.js","styled-components.browser.esm.js","index.js","get.c5347d95.js","inheritsLoose.js","_baseGet.a129809a.js","config.8925989d.js","deviceSizes.js","preload-helper.a88d9a6c.js","_getTag.b429d920.js","loadable.esm.b56577d2.js","intl.helpers.js","constructFrom.js","chevron-down-white.9dc10589.js","Button.8d2cd9c7.js","colors.esm.js","Spinner.5315ea69.js","_curry2.js","Icon.7afde0d4.js","index.js","assets/Icon-74bb0692.css","message.js","PlayFilled.esm.545555ed.js","tslib.es6.js","constants.8bb26a68.js","assets/ProductContainer-2163c76f.css"]).then(e=>e.default),getData:({params:e})=>({sku:e.sku}),children:[{path:"signup",getComponent:()=>D(()=>import("../RightPanel.b4a8d315.js"),["RightPanel.b4a8d315.js","styled-components.browser.esm.js","index.js","get.c5347d95.js","inheritsLoose.js","_baseGet.a129809a.js","config.8925989d.js","deviceSizes.js","intl.helpers.js","constructFrom.js","Title.56c7f5a4.js","constants.8bb26a68.js","message.js","PrimaryButton.248fe706.js","Button.8d2cd9c7.js","colors.esm.js","Spinner.5315ea69.js","_curry2.js","color-helpers.a463888e.js","AnimatedInput.7db9aaff.js","isEmpty.3cea2581.js","equals.js","_isArray.js","_isString.js","SvodTOS.487fca2a.js","includes.9d874696.js","_includes.js","Checkbox.040d61f9.js","assets/Checkbox-f70aab4f.css","index.9b6e9674.js","_getTag.b429d920.js","preload-helper.a88d9a6c.js","identity.27ffd062.js","moment.55cb88ed.js","fetch.4b32cb52.js","index.esm.js","tslib.es6.js","Button.esm.js","stripe-helpers.d176ec34.js","style.9ccf566f.js","assets/style-1ceae483.css","index.54e9ce06.js","text-helpers.js","Avatar.45aad3e3.js","productConstants.3bc6677e.js","DismissX.esm.js","CircleInfo.esm.e8a34853.js","CircleWarning.esm.779fde0c.js","Checkmark.esm.js","GiftingDisclaimer.b06615c1.js","_baseIteratee.07d193f7.js","StripeElement.29ed9613.js","Redirect.78bae377.js","provider.js","assets/RightPanel-9cd4584e.css"]).then(e=>e.default),getData:({context:e})=>{const{customer:t,hasPurchasedProduct:n}=e.store.getState().global.current,r=e.store.getState().checkout.product;if(J(t,r)||n)throw new R(Q(r));if(!F(r))throw new R(B(r))}},{path:"login",getComponent:()=>D(()=>import("../RightPanel.b4a8d315.js"),["RightPanel.b4a8d315.js","styled-components.browser.esm.js","index.js","get.c5347d95.js","inheritsLoose.js","_baseGet.a129809a.js","config.8925989d.js","deviceSizes.js","intl.helpers.js","constructFrom.js","Title.56c7f5a4.js","constants.8bb26a68.js","message.js","PrimaryButton.248fe706.js","Button.8d2cd9c7.js","colors.esm.js","Spinner.5315ea69.js","_curry2.js","color-helpers.a463888e.js","AnimatedInput.7db9aaff.js","isEmpty.3cea2581.js","equals.js","_isArray.js","_isString.js","SvodTOS.487fca2a.js","includes.9d874696.js","_includes.js","Checkbox.040d61f9.js","assets/Checkbox-f70aab4f.css","index.9b6e9674.js","_getTag.b429d920.js","preload-helper.a88d9a6c.js","identity.27ffd062.js","moment.55cb88ed.js","fetch.4b32cb52.js","index.esm.js","tslib.es6.js","Button.esm.js","stripe-helpers.d176ec34.js","style.9ccf566f.js","assets/style-1ceae483.css","index.54e9ce06.js","text-helpers.js","Avatar.45aad3e3.js","productConstants.3bc6677e.js","DismissX.esm.js","CircleInfo.esm.e8a34853.js","CircleWarning.esm.779fde0c.js","Checkmark.esm.js","GiftingDisclaimer.b06615c1.js","_baseIteratee.07d193f7.js","StripeElement.29ed9613.js","Redirect.78bae377.js","provider.js","assets/RightPanel-9cd4584e.css"]).then(e=>e.default),getData:({context:e})=>{const{customer:t,hasPurchasedProduct:n}=e.store.getState().global.current,r=e.store.getState().checkout.product;if(J(t,r)||n)throw new R(Q(r));if(e.store.dispatch(Qn(Pe)),!F(r))throw new R(B(r))}},{path:"receipt",getComponent:()=>D(()=>import("../Receipt.ea45bac9.js"),["Receipt.ea45bac9.js","preload-helper.a88d9a6c.js","styled-components.browser.esm.js","get.c5347d95.js","index.js","inheritsLoose.js","_baseGet.a129809a.js","_getTag.b429d920.js","config.8925989d.js","loadable.esm.b56577d2.js","intl.helpers.js","constructFrom.js","PrimaryButton.248fe706.js","Button.8d2cd9c7.js","colors.esm.js","Spinner.5315ea69.js","_curry2.js","color-helpers.a463888e.js","Title.56c7f5a4.js","deviceSizes.js","message.js","_baseIteratee.07d193f7.js","identity.27ffd062.js","fetch.4b32cb52.js","constants.8bb26a68.js","index.9b6e9674.js","moment.55cb88ed.js","Redirect.78bae377.js","provider.js"]).then(e=>e.default),getData:({context:e})=>{const{customer:t,hasPurchasedProduct:n,currentPurchaseType:r}=e.store.getState().global.current,{product:o,purchaseOption:s}=e.store.getState().checkout;if(!Fn(s)&&!J(t,o)&&!n&&!r)throw new R(F(o)?X(o):B(o))}},{path:"processing",getComponent:()=>D(()=>import("../ProcessingTransaction.e3546ae6.js"),["ProcessingTransaction.e3546ae6.js","styled-components.browser.esm.js","index.js","get.c5347d95.js","inheritsLoose.js","_baseGet.a129809a.js","config.8925989d.js","constants.8bb26a68.js","intl.helpers.js","constructFrom.js","PrimaryButton.248fe706.js","Button.8d2cd9c7.js","colors.esm.js","Spinner.5315ea69.js","_curry2.js","color-helpers.a463888e.js","Title.56c7f5a4.js","message.js","preload-helper.a88d9a6c.js","_getTag.b429d920.js","_baseIteratee.07d193f7.js","identity.27ffd062.js","fetch.4b32cb52.js","index.9b6e9674.js","moment.55cb88ed.js","Redirect.78bae377.js","provider.js","assets/ProcessingTransaction-5a0fa1f5.css"]).then(e=>e.default),getData:({context:e})=>{const{customer:t,preexistingProcessingTransaction:n}=e.store.getState().global.current,{product:r}=e.store.getState().checkout;if(!t.id)throw new R(X(r));if(!n.id)throw new R(B(r))}},{path:"purchase",getComponent:()=>D(()=>import("../RightPanel.b4a8d315.js"),["RightPanel.b4a8d315.js","styled-components.browser.esm.js","index.js","get.c5347d95.js","inheritsLoose.js","_baseGet.a129809a.js","config.8925989d.js","deviceSizes.js","intl.helpers.js","constructFrom.js","Title.56c7f5a4.js","constants.8bb26a68.js","message.js","PrimaryButton.248fe706.js","Button.8d2cd9c7.js","colors.esm.js","Spinner.5315ea69.js","_curry2.js","color-helpers.a463888e.js","AnimatedInput.7db9aaff.js","isEmpty.3cea2581.js","equals.js","_isArray.js","_isString.js","SvodTOS.487fca2a.js","includes.9d874696.js","_includes.js","Checkbox.040d61f9.js","assets/Checkbox-f70aab4f.css","index.9b6e9674.js","_getTag.b429d920.js","preload-helper.a88d9a6c.js","identity.27ffd062.js","moment.55cb88ed.js","fetch.4b32cb52.js","index.esm.js","tslib.es6.js","Button.esm.js","stripe-helpers.d176ec34.js","style.9ccf566f.js","assets/style-1ceae483.css","index.54e9ce06.js","text-helpers.js","Avatar.45aad3e3.js","productConstants.3bc6677e.js","DismissX.esm.js","CircleInfo.esm.e8a34853.js","CircleWarning.esm.779fde0c.js","Checkmark.esm.js","GiftingDisclaimer.b06615c1.js","_baseIteratee.07d193f7.js","StripeElement.29ed9613.js","Redirect.78bae377.js","provider.js","assets/RightPanel-9cd4584e.css"]).then(e=>e.default),getData:({context:e})=>{const{customer:t,hasPurchasedProduct:n,currentPurchaseType:r,preexistingProcessingTransaction:o}=e.store.getState().global.current,s=e.store.getState().checkout.product;if(J(t,s)||n||r)throw new R(Q(s));if(F(s))throw new R(X(s));if(o.id)throw new R(Ln(s))}},{path:"gift",getComponent:()=>D(()=>import("../RightPanel.b4a8d315.js"),["RightPanel.b4a8d315.js","styled-components.browser.esm.js","index.js","get.c5347d95.js","inheritsLoose.js","_baseGet.a129809a.js","config.8925989d.js","deviceSizes.js","intl.helpers.js","constructFrom.js","Title.56c7f5a4.js","constants.8bb26a68.js","message.js","PrimaryButton.248fe706.js","Button.8d2cd9c7.js","colors.esm.js","Spinner.5315ea69.js","_curry2.js","color-helpers.a463888e.js","AnimatedInput.7db9aaff.js","isEmpty.3cea2581.js","equals.js","_isArray.js","_isString.js","SvodTOS.487fca2a.js","includes.9d874696.js","_includes.js","Checkbox.040d61f9.js","assets/Checkbox-f70aab4f.css","index.9b6e9674.js","_getTag.b429d920.js","preload-helper.a88d9a6c.js","identity.27ffd062.js","moment.55cb88ed.js","fetch.4b32cb52.js","index.esm.js","tslib.es6.js","Button.esm.js","stripe-helpers.d176ec34.js","style.9ccf566f.js","assets/style-1ceae483.css","index.54e9ce06.js","text-helpers.js","Avatar.45aad3e3.js","productConstants.3bc6677e.js","DismissX.esm.js","CircleInfo.esm.e8a34853.js","CircleWarning.esm.779fde0c.js","Checkmark.esm.js","GiftingDisclaimer.b06615c1.js","_baseIteratee.07d193f7.js","StripeElement.29ed9613.js","Redirect.78bae377.js","provider.js","assets/RightPanel-9cd4584e.css"]).then(e=>e.default),getData:({params:e})=>({sku:e.sku})}]}],Ne=({context:e})=>{const{site:t,hasPurchasedProduct:n}=e.store.getState().global.current,r=e.store.getState().checkout.product;return x("gift")==="1"?Mn(r):n?Q(r):F(t)?X(r):B(r)},hr=[new he({from:"checkout",to:Ne}),new he({from:"checkout/:sku",to:Ne}),{path:"checkout",getComponent:()=>D(()=>import("../Checkout.2f08987b.js"),["Checkout.2f08987b.js","styled-components.browser.esm.js","index.esm.js","tslib.es6.js","colors.esm.js","inheritsLoose.js","index.js","get.c5347d95.js","_baseGet.a129809a.js","LanguageSwitcher.js","intl.helpers.js","constructFrom.js","deviceSizes.js","provider.js","message.js","Spinner.5315ea69.js","config.8925989d.js","constants.8bb26a68.js","routeConstants.55280d55.js","CircleInfo.esm.e8a34853.js","react-onclickoutside.es.eeba3199.js","Avatar.45aad3e3.js","text-helpers.js","_isArray.js","_curry2.js","Title.56c7f5a4.js","Logo.54ab68cd.js","isEmpty.3cea2581.js","equals.js","_isString.js","preload-helper.a88d9a6c.js","_getTag.b429d920.js","_baseIteratee.07d193f7.js","identity.27ffd062.js","fetch.4b32cb52.js","index.9b6e9674.js","moment.55cb88ed.js","Redirect.78bae377.js","assets/Checkout-39461467.css"]).then(e=>e.default),children:pr},{path:"plans",getComponent:()=>D(()=>import("../Plans.c4bedd24.js"),["Plans.c4bedd24.js","styled-components.browser.esm.js","index.esm.js","tslib.es6.js","colors.esm.js","inheritsLoose.js","get.c5347d95.js","index.js","_baseGet.a129809a.js","Logo.54ab68cd.js","Title.56c7f5a4.js","config.8925989d.js","deviceSizes.js","isEmpty.3cea2581.js","_curry2.js","equals.js","_isArray.js","_isString.js","intl.helpers.js","constructFrom.js","Button.esm.js","LanguageSwitcher.988bd243.js","Select.esm.72883512.js","Header.esm.js","Checkmark.esm.js","Wrapper.esm.d1c16405.js","Paragraph.esm.b1c09bf4.js","ChevronDown.esm.js","PopOver.esm.729e5367.js","assets/LanguageSwitcher-29a142b9.css","message.js","assets/Plans-11f84154.css"]).then(e=>e.default),getData:({location:e})=>({videoId:e.query.video_id})}];class _e extends st.Component{render(){return j.jsxs($t,{locale:me(),messages:St(me()),textComponent:"span",children:[j.jsx(pt,{}),this.props.children]})}}const wr=[{path:"/",Component:_e,getData:async({context:e})=>{await e.store.dispatch(hn()),await e.store.dispatch(wn()),(ee(e.store.getState().global.current.site)||ee(e.store.getState().global.current.customer))&&await e.store.dispatch(pn())},children:hr}],fr=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||It,ae=gt(ce(Tr),fr(at({protocol:new ct,middlewares:[dt]}),ut(new _t(wr)),Nt(ht)));ae.dispatch(Et.init());const tt=({error:e})=>j.jsx("div",{children:e});tt.propTypes={error:Ie.string};const Sr=lt({render:mt({renderError:tt})});_e.propTypes={children:Ie.node};_e.defaultProps={children:j.jsx("div",{})};ot.render(j.jsx(yt,{store:ae,children:j.jsx(Sr,{resolver:Tt,matchContext:{store:ae}})}),document.getElementById("customer-app"));export{No as A,Hn as B,to as C,$n as D,Jr as E,jr as F,eo as G,$r as H,Eo as I,so as J,lo as K,co as L,uo as M,ao as N,io as O,Mr as P,_o as Q,fo as R,Io as S,Po as T,Zr as U,no as V,Kr as W,Qr as X,xn as Y,Mn as Z,Gn as a,X as b,F as c,x as d,Fr as e,po as f,B as g,Xr as h,Br as i,oo as j,yo as k,ho as l,wo as m,Wr as n,Yr as o,qr as p,Fn as q,zr as r,Qn as s,Hr as t,To as u,go as v,So as w,mo as x,ro as y,Q as z};
//# sourceMappingURL=customer-811e7ac1.js.map
